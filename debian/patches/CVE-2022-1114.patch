From 78f03b619d08d7c2e0fcaccab407e3ac93c2ee8f Mon Sep 17 00:00:00 2001
From: Cristy <urban-warrior@imagemagick.org>
Date: Tue, 15 Mar 2022 21:59:36 -0400
Subject: [PATCH] Coders:
 https://github.com/ImageMagick/ImageMagick/issues/4947

---
 coders/dcm.c | 15 +++++++--------
 1 file changed, 7 insertions(+), 8 deletions(-)

--- imagemagick-6.9.11.60+dfsg.orig/coders/dcm.c
+++ imagemagick-6.9.11.60+dfsg/coders/dcm.c
@@ -3242,15 +3242,15 @@ static Image *ReadDCMImage(const ImageIn
           RelinquishMagickMemory(info_copy);
         }
 
-      /*
-        If we're entering a sequence, push the current image parameters onto
-        the stack, so we can restore them at the end of the sequence.
-      */
       if (strcmp(explicit_vr,"SQ") == 0)
         {
-          DCMInfo *info_copy = (DCMInfo *) AcquireMagickMemory(sizeof(info));
-          memcpy(info_copy,&info,sizeof(info));
-          AppendValueToLinkedList(stack,info_copy);
+          /*
+            If we're entering a sequence, push the current image parameters
+            onto the stack, so we can restore them at the end of the sequence.
+          */
+          DCMInfo *clone_info = (DCMInfo *) AcquireMagickMemory(sizeof(info));
+          (void) memcpy(clone_info,&info,sizeof(info));
+          AppendValueToLinkedList(stack,clone_info);
           sequence_depth++;
         }
 
